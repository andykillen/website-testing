var testing={tags:["a","abbr","address","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","footer","form","h1","h2","h3","h4","h5","h6","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optiongroup","option","output","p","param","pre","pogress","picture","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","span","sub","summary","sup","svg","table","tbody","td","textarea","tfoot","th","thead","time","tr","title","tr","track","tt","u","ul","var","video","wbr"],report:{altText:[],backgroundImageCount:0,badmeta:[],badheadigns:[],canonical:{entered:"",actual:"",shortlink:"",next:"",prev:"",amphtml:""},charset:"",content:"",codingStandards:{flex:0,grid:0,table:0,float:0,absolute:0},html:{},schema:{json:[],itemprop:[],itemscope:[]},languages:[],rss:[],meta:{facebook:[],twitter:[],article:[],msuic:[],book:[],video:[],profile:[],others:[],al:[]},shareImageDimensions:[],responsiveImages:!1,responsiveImageType:[],responsiveImageCount:0,nonResponsiveImages:0,lazyLoadImageCount:0,time:{correct:0,incorrect:0,values:{datetime:[],node:[]}},links:[],sections:{nested:0,withoutHeading:0,total:0},totalcount:0,frameworks:[],fonts:[],fontSizes:[],icons:{count:0,sizes:[],types:{icons:[],fontawesome:[]}},pre:{count:0,sizes:[],types:{preload:[],preconnect:[],prerender:[],prefetch:[],"dns-prefetch":[]}},css:{count:0,media:[]},prefetch:0,preload:0,preconnect:0,url:"",dateRecorded:""},init:function(){testing.addHtml();for(var t=0;t<testing.tags.length;t++){var e=document.getElementsByTagName(testing.tags[t]);switch(testing.report.html[testing.tags[t]]={},testing.tags[t]){case"title":testing.dealWithTitle(e,t);break;case"img":testing.addCountAndFontSizes(e,t),testing.checkResponsiveImages(e),testing.checkLazyLoadImages(e);break;case"source":testing.addCountAndFontSizes(e,t),testing.checkResposivePicture(e);break;case"meta":testing.addCountAndFontSizes(e,t),testing.checkMeta(e);break;case"link":testing.addCountAndFontSizes(e,t),testing.checkLinks(e);break;case"script":testing.addCountAndFontSizes(e,t),testing.checkScriptsForJsonLD(e);break;case"h1":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h1");break;case"h2":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h2");break;case"h3":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h3");break;case"h4":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h4");break;case"h5":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h5");break;case"h6":testing.addCountAndFontSizes(e,t),testing.isGoodHeadingStructure(e,"h6");break;case"section":testing.addCountAndFontSizes(e,t),testing.isSemanticSection(e,"section");break;case"time":testing.addCountAndFontSizes(e,t),testing.checkForDateTime(e,t);break;default:testing.addCountAndFontSizes(e,t)}testing.modernHTMLCheck(e,t),testing.report.totalcount+=e.length}testing.jQueryCheck(),testing.checkForFontAwesome(),testing.cssValuesExtraction(),testing.nonResponsiveCount(),testing.sortFontSizes(),testing.setPageDetails(),testing.makeReport(),console.log(testing.report)},addHtml:function(){testing.report.content=document.getElementsByTagName("html")[0].outerHTML},checkResposivePicture:function(t){for(var e=0;e<t.length;e++)testing.checkForRetina(t[e].getAttribute("srcset")),"PICTURE"===t[e].parentNode.nodeName&&(testing.report.responsiveImages=!0,testing.report.responsiveImageCount+=1,-1===testing.report.responsiveImageType.indexOf("picture")&&testing.report.responsiveImageType.push("picture"))},checkResponsiveImages:function(t){for(var e=0;e<t.length;e++)"NOSCRIPT"!==t[e].parentNode.nodeName&&"PICTURE"!==t[e].parentNode.nodeName||(testing.report.html.img.count-=1),t[e].hasAttribute("srcset")&&(testing.report.responsiveImages=!0,testing.report.responsiveImageCount+=1,testing.checkForRetina(t[e].getAttribute("srcset")),-1===testing.report.responsiveImageType.indexOf("img")&&testing.report.responsiveImageType.push("img")),t[e].hasAttribute("alt")&&testing.report.altText.push(t[e].getAttribute("alt"))},checkLazyLoadImages:function(t){for(var e=0;e<t.length;e++)t[e].hasAttribute("loading")&&"lazy"==t[e].getAttribute("loading")&&(testing.report.lazyLoadImageCount+=1)},checkForRetina:function(t){null!=t&&0<t.replace(/,/g," ").split(" ").indexOf("2x")&&-1===testing.report.responsiveImageType.indexOf("retina")&&testing.report.responsiveImageType.push("retina")},checkForDateTime:function(t,e){for(var n=0;n<t.length;n++)t[n].hasAttribute("datetime")?(testing.report.time.correct+=1,testing.report.time.values.datetime.push(t[n].getAttribute("datetime"))):t[n].hasChildNodes()?(testing.report.time.incorrect+=1,t[n].style.backgroundColor="red",testing.report.time.values.node.push(t[n].textContent)):(testing.report.time.correct+=1,testing.report.time.values.node.push(t[n].innerText))},modernHTMLCheck:function(t,e){for(var n=0;n<t.length;n++){var i=window.getComputedStyle(t[n]).getPropertyValue("display");-1<["grid","flex","table"].indexOf(i)&&(testing.report.codingStandards[i]+=1);i=window.getComputedStyle(t[n]).getPropertyValue("float");-1<["left","right"].indexOf(i)&&(testing.report.codingStandards.float+=1),"absolute"==(i=window.getComputedStyle(t[n]).getPropertyValue("position"))&&(testing.report.codingStandards.absolute+=1)}},addCountAndFontSizes:function(t,e){testing.report.html[testing.tags[e]].count=t.length,void 0===testing.report.html[testing.tags[e]].fontsize&&(testing.report.html[testing.tags[e]].fontsize=[]);for(var n=0;n<t.length;n++){var i=window.getComputedStyle(t[n]).getPropertyValue("font-size");parseInt(i.replace("px",""))<13&&(t[n].style.backgroundColor="red"),-1==testing.report.html[testing.tags[e]].fontsize.indexOf(i)&&testing.report.html[testing.tags[e]].fontsize.push(i),t[n].hasAttribute("itemprop")&&(void 0===testing.report.schema.itemprop[testing.tags[e]]&&(testing.report.schema.itemprop[testing.tags[e]]=[]),testing.report.schema.itemprop[testing.tags[e]].push(t[n].getAttribute("itemprop"))),t[n].hasAttribute("itemscope")&&(void 0===testing.report.schema.itemscope[testing.tags[e]]&&(testing.report.schema.itemscope[testing.tags[e]]=[]),testing.report.schema.itemscope[testing.tags[e]].push(t[n].getAttribute("itemscope")))}},dealWithTitle:function(t,e){for(var n=testing.report.html[testing.tags[e]].count=0;n<t.length;n++)null==t[n].closest("svg")&&(testing.report.html[testing.tags[e]].count+=1)},checkForFontAwesome:function(){var t=document.querySelectorAll("[class*='fa-']");console.log(" with font awesome : "+t.length),testing.report.icons.types.fontawesome.push({fontawesome:t.length})},jQueryCheck:function(){void 0!==window.jQuery&&testing.report.frameworks.push({jQuery:jQuery.fn.jquery})},cssValuesExtraction:function(){for(var t=document.getElementsByTagName("*"),e=0;e<t.length;e++){for(var n=window.getComputedStyle(t[e]).getPropertyValue("font-family").split(","),i=0;i<n.length;i++){var r=n[i].replace(/\"/g,"").trim();""!=r&&-1===testing.report.fonts.indexOf(r)&&testing.report.fonts.push(r)}-1!=window.getComputedStyle(t[e]).getPropertyValue("background-image").indexOf("/")&&(testing.report.backgroundImageCount+=1)}},nonResponsiveCount:function(){testing.report.nonResponsiveImages=testing.report.backgroundImageCount+testing.report.html.img.count-testing.report.responsiveImageCount},checkMeta:function(t){for(var e=0;e<t.length;e++){if(t[e].hasAttribute("charset")&&(testing.charset=t[e].getAttribute("charset")),t[e].hasAttribute("property")){if(t[e].hasAttribute("name")){testing.setBadMeta(t[e]);continue}0==(n=t[e].getAttribute("property")).indexOf("fb:")||0==n.indexOf("og:")?(testing.report.meta.facebook.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}),"og:image"!=n&&"og:image:url"!=n&&"og:image:secure_url"!=n||testing.getImageDimensions(testing.getAttribIfKnown(t[e],"content"),"facebook")):0==n.indexOf("al:")?testing.report.meta.al.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):0==n.indexOf("article:")?testing.report.meta.article.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):0==n.indexOf("music:")?testing.report.meta.music.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):0==n.indexOf("video:")?testing.report.meta.video.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):0==n.indexOf("profile:")?testing.report.meta.profile.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):0==n.indexOf("book:")?testing.report.meta.book.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}):testing.report.meta.others.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content"),itemprop:testing.getAttribIfKnown(t[e],"itemprop")})}if(t[e].hasAttribute("name")){var n;if(0==(n=t[e].getAttribute("name")).indexOf("og:")||0==n.indexOf("fb:")){testing.setBadMeta(t[e]);continue}if(0==n.indexOf("article:")||0==n.indexOf("video:")||0==n.indexOf("book:")||0==n.indexOf("music:")||0==n.indexOf("profile:")){testing.setBadMeta(t[e]);continue}0==n.indexOf("twitter:")?(testing.report.meta.twitter.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content")}),"twitter:image"==n&&testing.getImageDimensions(testing.getAttribIfKnown(t[e],"content"),"twitter")):(testing.report.meta.others.push({propery:testing.getAttribIfKnown(t[e],"property"),name:testing.getAttribIfKnown(t[e],"name"),content:testing.getAttribIfKnown(t[e],"content"),itemprop:testing.getAttribIfKnown(t[e],"itemprop")}),"image_src"==n&&testing.getImageDimensions(testing.getAttribIfKnown(t[e],"content"),"image_src"))}}},setBadMeta:function(t){testing.report.badmeta.push({propery:testing.getAttribIfKnown(t,"property"),name:testing.getAttribIfKnown(t,"name"),content:testing.getAttribIfKnown(t,"content")})},checkLinks:function(t){for(var e=0;e<t.length;e++)switch(t[e].getAttribute("rel")){case"shortcut icon":testing.report.icons.types.icons.push({type:"favicon",filetype:testing.getFileTypeFromPath(t[e].getAttribute("href")),size:testing.getAttribIfKnown(t[e])});break;case"icon":case"apple-touch-icon":case"apple-touch-icon-precomposed":case"apple-touch-startup-image":testing.report.icons.types.icons.push({type:t[e].getAttribute("rel"),filetype:testing.getFileTypeFromPath(t[e].getAttribute("href")),size:testing.getAttribIfKnown(t[e],"sizes")});break;case"stylesheet":testing.report.css.count+=1,testing.report.css.media.push(testing.getAttribIfKnown(t[e],"media"));break;case"preload":testing.report.pre.types.preload.push({type:testing.getAttribIfKnown(t[e],"rel"),filetype:t[e].getAttribute("href"),as:testing.getAttribIfKnown(t[e],"as")});break;case"preconnect":case"prerender":case"prefetch":case"dns-prefetch":testing.report.pre.types[testing.getAttribIfKnown(t[e],"rel")].push({type:testing.getAttribIfKnown(t[e],"rel"),filetype:t[e].getAttribute("href")}),testing.report.pre.count+=1;break;case"alternate":t[e].hasAttribute("type")&&"application/rss+xml"==t[e].getAttribute("type")?testing.report.rss.push({type:testing.getAttribIfKnown(t[e],"type"),url:testing.getAttribIfKnown(t[e],"href")}):testing.report.languages.push({lang:testing.getAttribIfKnown(t[e],"hreflang"),url:testing.getAttribIfKnown(t[e],"href"),type:testing.getAttribIfKnown(t[e],"type")});break;case"shortlink":testing.report.canonical.shortlink=testing.getAttribIfKnown(t[e],"href");break;case"amphtml":testing.report.canonical.amphtml=testing.getAttribIfKnown(t[e],"href");break;case"canonical":testing.report.canonical.entered=testing.getAttribIfKnown(t[e],"href"),testing.report.canonical.actual=window.location.href;break;case"prev":testing.report.canonical.prev=testing.getAttribIfKnown(t[e],"href");break;case"next":testing.report.canonical.next=testing.getAttribIfKnown(t[e],"href");break;default:t[e].hasAttribute("type")&&"application/rss+xml"==t[e].hasAttribute("type")?testing.report.rss.push({type:testing.getAttribIfKnown(t[e],"type"),url:testing.getAttribIfKnown(t[e],"href")}):testing.report.links.push({url:testing.getAttribIfKnown(t[e],"href"),type:testing.getAttribIfKnown(t[e],"rel")})}},getFileTypeFromPath:function(t){return-1<(t=t.substring(t.lastIndexOf(".")+1,t.length)||t).indexOf("?")&&(splitup=t.split("?"),t=splitup[0]),t},getAttribIfKnown:function(t,e){return t.hasAttribute(e)?t.getAttribute(e):""},checkScriptsForJsonLD:function(t){for(var e=0;e<t.length;e++)if(t[e].hasAttribute("type")&&"application/ld+json"==t[e].getAttribute("type")){var n=JSON.parse(t[e].innerText);for(s in n)void 0!==n[s]["@type"]&&-1===testing.report.schema.json.indexOf(n[s]["@type"])&&testing.report.schema.json.push(n[s]["@type"])}},makeReport:function(){reporting.init()},sendInfo:function(){},isGoodHeadingStructure:function(t,e){for(var n=0;n<t.length;n++)if((null==t[n].closest("header")||null==t[n].closest("article"))&&null==t[n].closest("article")){var i=["h1","h2","h3","h4","h5"];switch(e){case"h1":for(var r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]});break;case"h2":i.shift();for(r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]});break;case"h3":i.shift(),i.shift();for(r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]});break;case"h4":i.shift(),i.shift(),i.shift();for(r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]});break;case"h5":i.shift(),i.shift(),i.shift(),i.shift();for(r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]});break;case"h6":i.shift(),i.shift(),i.shift(),i.shift(),i.shift();for(r=0;r<i.length;r++)null!=t[n].parentNode.closest(i[r])&&testing.report.badheadigns.push({basenode:e,parentheading:i[r]})}}},getImageDimensions:function(t,e){var n=new Image;n.addEventListener("load",function(){testing.report.shareImageDimensions.push({height:this.naturalHeight,width:this.naturalWidth,network:e})}),n.src=t},sortFontSizes:function(){for(el in testing.report.html)if(void 0!==testing.report.html[el].fontsize)for(var t=0;t<testing.report.html[el].fontsize.length;t++){var e=parseFloat(testing.report.html[el].fontsize[t].replace(/px/,""));-1==testing.report.fontSizes.indexOf(e)&&testing.report.fontSizes.push(e)}testing.report.fontSizes.sort()},isSemanticSection:function(t,e){for(var n=0;n<t.length;n++){0<t[n].getElementsByTagName("section").length&&(testing.report.sections.nested+=1),t[n].classList.add("found-section");for(var i=t[n].querySelectorAll("h1,h2,h3,h4,h5,h6"),r=0;r<i.length;r++)i[r].closest("section")!=i[r].closest("section.found-section")&&(testing.report.sections.withoutHeading+=1)}testing.report.sections.total=t.length},setPageDetails:function(){testing.report.url=window.location.href;var t=new Date;testing.report.dateRecorded=this.getFormattedDate(t)},getFormattedDate:function(t){var e=t.getFullYear(),n=(1+t.getMonth()).toString();n=1<n.length?n:"0"+n;var i=t.getDate().toString();return n+"/"+(i=1<i.length?i:"0"+i)+"/"+e}};